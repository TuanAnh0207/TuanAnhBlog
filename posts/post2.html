<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OOP Java qua ví dụ thực chiến</title>
  <link rel="stylesheet" href="../assets/css/index.css" />
</head>
<body>
  <header class="header">
    <div class="header__container">
      <a href="../index.html" class="header__title">Tuấn Anh Blog</a>
      <nav class="header__nav">
        <a class="header__nav-link" href="../index.html">Home</a>
      </nav>
    </div>
  </header>
  <main class="post" style="max-width: 820px; margin: 2rem auto; padding: 0 1rem;">
    <h1 class="post__title">OOP Java qua ví dụ thực chiến</h1>
    <img class="post-hero" src="../assets/images/Post/OOP Java qua ví dụ thực chiến.png" alt="OOP Java" />
    <p class="post__summary">Áp dụng class, interface, abstract class, và nguyên tắc SOLID trong bài toán đặt xe: mô hình hoá thực thể, thiết kế API gọn, và mở rộng không phá vỡ.</p>
    <h2>Class và kế thừa</h2>
    <p>Thiết kế lớp <em>Vehicle</em> cơ sở, kế thừa <em>Car</em>, <em>Bike</em> để tái sử dụng code và mở rộng hành vi.</p>
    <pre><code>public abstract class Vehicle {
  protected String id;
  protected String plate;
  public abstract double baseFareKm();
}

public class Car extends Vehicle {
  public double baseFareKm(){ return 10_000; }
}

public class Bike extends Vehicle {
  public double baseFareKm(){ return 5_000; }
}</code></pre>
    <h2>Interface</h2>
    <p>Định nghĩa hợp đồng (ví dụ <em>Bookable</em>) giúp thay thế linh hoạt các implementation.</p>
    <pre><code>public interface PricingStrategy {
  double price(double km, double surgeRate);
}

public class DefaultPricing implements PricingStrategy {
  private final Vehicle vehicle;
  public DefaultPricing(Vehicle v){ this.vehicle = v; }
  public double price(double km, double surge){
    return vehicle.baseFareKm() * km * surge;
  }
}</code></pre>
    <h2>Abstract class</h2>
    <p>Kết hợp template method để cố định luồng xử lý và cho phép tuỳ biến bước nhỏ.</p>
    <pre><code>public abstract class BookingService {
  public final String book(double km){
    validate(km);
    double p = calcPrice(km);
    return confirm(p);
  }
  protected abstract void validate(double km);
  protected abstract double calcPrice(double km);
  protected String confirm(double price){
    return "CONFIRMED:" + price;
  }
}</code></pre>
    <h2>SOLID tóm tắt</h2>
    <ul>
      <li><strong>S</strong>: Mỗi class một trách nhiệm.</li>
      <li><strong>O</strong>: Mở để mở rộng, đóng để sửa đổi – dùng interface/strategy.</li>
      <li><strong>L</strong>: Thay thế được subtype – đừng phá vỡ contract.</li>
      <li><strong>I</strong>: Interface nhỏ, đặc thù.</li>
      <li><strong>D</strong>: Phụ thuộc abstraction.</li>
    </ul>
    <h2>Design pattern gợi ý</h2>
    <ul>
      <li><strong>Strategy</strong>: thay đổi cách tính giá/khuyến mãi theo thời điểm.</li>
      <li><strong>Factory</strong>: khởi tạo phương tiện theo input (car/bike).</li>
      <li><strong>Decorator</strong>: cộng thêm phụ phí (đêm/mưa/kẹt xe) không đổi core.</li>
      <li><strong>Observer</strong>: lắng nghe trạng thái chuyến đi, push cập nhật UI.</li>
    </ul>
    <h2>Kiểm thử hướng hành vi</h2>
    <pre><code>// JUnit 5 example
@Test
void priceShouldIncreaseWithSurge(){
  PricingStrategy s = new DefaultPricing(new Car());
  assertEquals(20000, s.price(1, 2.0));
}</code></pre>
    <h2>Bẫy thường gặp</h2>
    <ul>
      <li>Nhồi nhét nhiều trách nhiệm vào một class (vi phạm SRP).</li>
      <li>Ép kế thừa khi chỉ cần composition.</li>
      <li>Interface quá to, khó thay thế; tách nhỏ theo chức năng.</li>
    </ul>
    <h2>Case study: hệ thống đặt xe</h2>
    <p>Áp dụng Strategy cho giá theo giờ cao điểm; Decorator cho phụ phí; Factory cho phương tiện; Repository pattern để lưu trạng thái. Thiết kế DTO/mapper tách domain khỏi giao tiếp.</p>
    <h2>Case study: hệ thống đặt xe</h2>
    <p>Tách domain: <em>Rider</em>, <em>Driver</em>, <em>Trip</em>, <em>Pricing</em>. Áp dụng Strategy cho giá động, State cho vòng đời chuyến đi (REQUESTED→ASSIGNED→ONGOING→COMPLETED/CANCELED).</p>
    <h2>Checklist review OOP</h2>
    <ul>
      <li>Biến private, expose qua phương thức có ý nghĩa.</li>
      <li>Constructor nhẹ; logic nặng đưa sang factory/builder.</li>
      <li>Viết test trước khi đổi interface public.</li>
    </ul>
    <section class="related">
      <h3 class="related__title">Bài viết gần đây</h3>
      <div class="related__grid">
        <a class="related-card" href="./post1.html">
          <img class="related-card__thumb" src="../assets/images/BATUOC.png" alt="JVM" />
          <div class="related-card__body"><h4 class="related-card__title">JVM, JRE, JDK</h4><p class="related-card__desc">Hiểu nền tảng chạy Java.</p></div>
        </a>
        <a class="related-card" href="./post3.html">
          <img class="related-card__thumb" src="../assets/images/BATUOC.png" alt="Collections" />
          <div class="related-card__body"><h4 class="related-card__title">Collections</h4><p class="related-card__desc">Chọn DS phù hợp.</p></div>
        </a>
        <a class="related-card" href="./post5.html">
          <img class="related-card__thumb" src="../assets/images/BATUOC.png" alt="Network" />
          <div class="related-card__body"><h4 class="related-card__title">Mạng với Java</h4><p class="related-card__desc">Socket, TCP/UDP.</p></div>
        </a>
      </div>
    </section>
  </main>
</body>
</html>

